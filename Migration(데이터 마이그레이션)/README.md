# Migration(마이그레이션)
migration ; 마이그레이션, 이주(移住)

정보기술에서, 마이그레이션이란 한 운영환경으로부터, 대개의 경우 좀더 낫다고 여겨지는 다른 운영환경으로 옮겨가는 과정을 말한다. 예를 들어, 윈도우NT 서버를 윈도우2000 서버로 옮겨가는 것을 마이그레이션이라고 볼 수 있는데, 그 이유는 새로운 특색들이 이용된다는 것과, 이전의 설정치들을 변경할 필요가 없다는 것에 대한 확신, 그리고 현재의 애플리케이션들이 새로운 환경에서도 계속 운영됨을 보장하는 단계 등이 수반되기 때문이다. 마이그레이션은 또한 윈도우NT 환경으로부터 유닉스 기반의 운영체계로 옮기는 것 (또는 그의 반대방향의 경우도 마찬가지다)을 의미할 수도 있다. 마이그레이션은 새로운 하드웨어나, 새로운 소프트웨어, 또는 둘 모두가 바뀌는 환경으로의 이주를 포함할 수 있다. 마이그레이션의 규모에는, 단일 시스템이 옮겨가는 것과 같은 소규모 마이그레이션도 있지만, 많은 시스템들이 새로운 애플리케이션이나 새롭게 재설계된 네트웍으로 옮겨가게 되는 대규모 마이그레이션도 있을 수 있다.

마이그레이션은 또한 데이터를 한 저장장치에서 다른 저장장치로 옮기는 과정을 의미하는 데에도 사용된다.

<br/>

# Data Migration(데이터 마이그레이션)
마이그레이션은 한 종류의 데이터베이스에서 다른 종류의 데이터베이스로 데이터를 옮기는 경우도 될 수 있다. 이것은 대체로 이전의 데이터베이스로부터의 출력이 새로운 데이터베이스의 입력이 되도록 어떤 공통된 형식으로 데이터를 변환하는 작업이 필요하다. 새로운 데이터베이스는 다르게 구성될 수 있기 때문에, 마이그레이션이 진행중인 파일들을 처리할 수 있는 프로그램을 작성하는 것이 필요할 수도 있다.

<br/>

## 데이터 마이그레이션이 어렵고 위험해 보이는 이유
'데이터 중력' 때문. 데이터 중력이라는 개념은 언젠가부터 있어 왔지만 클라우드 인프라로의 데이터 마이그레이션 때문에 이 문제는 더욱 중요해지고 있다. 데이터 중력은 다음을 설명하는 하나의 비유에 해당한다.
- 데이터가 증가함에 따라 데이터가 다른 데이터를 끌어들이는 방식
- 데이터를 비즈니스에 통합하는 방식
- 시간이 지남에 따라 데이터가 맞춤화되는 방식

주요 문제는 모든 애플리케이션이 애플리케이션 로직의 요소를 데이터 관리 계층에 도입하여 데이터 관리를 복잡하게 만들고 각 요소가 그 다음 데이터 사용 사례와 무관하다는 것이다. 비즈니스 프로세스는 데이터를 분리하여 사용하고 자체 형식을 출력하여 다음 프로세스를 위한 통합이 과제로 남는다. 따라서 애플리케이션 설계, 데이터 아키텍처 및 비즈니스 프로세스는 모두 상호 응답해야 하지만 대개 이러한 그룹 중 하나는 변경할 수 없거나 변경하지 않으려 한다. 이로 인해 애플리케이션 관리자는 이상적이고 단순한 워크플로우를 회피하게 되어, 설계가 최적화되지 않는다. 또한 당시에 해결 방법이 필요했었을 수도 있지만 결국에 이 기술적 부채는 데이터 마이그레이션 또는 통합 프로젝트 중에 해결해야 한다.

이러한 복잡성을 고려하여, 데이터 마이그레이션을 "전략적 무기" 상태로 승격해 올바른 수준의 인식과 리소스를 확보하는 것을 고려해야 함. 프로젝트에 필요한 주의를 끌려면 마이그레이션의 가장 도발적인 요소, 즉 기존 시스템이 꺼진(중단된)다는 사실에 초점을 맞춘다면 분명 주요 이해 관계자의 관심을 끌 것이다.

<br/>

## [데이터 마이그레이션의 유형](https://azure.microsoft.com/ko-kr/resources/cloud-computing-dictionary/what-is-data-migration/#types-of-data-migration)
- 스토리지 마이그레이션
- 클라우드 마이그레이션
- 애플리케이션 마이그레이션
- 데이터베이스 마이그레이션
- 비즈니스 프로세스 마이그레이션

<br/>

## 데이터 마이그레이션 vs 데이터 변환
데이터 마이그레이션이 무엇을 의미하는지 더 명확하게 이해하려면 데이터 변환이 무엇이며 데이터 마이그레이션과 어떤 관련이 있는지 아는 것이 중요하다. 활동이나 프로젝트가 데이터 변환인지 또는 데이터 마이그레이션인지에 대해 혼동이 있는 경우가 많음. 정의에 따르면 **데이터 마이그레이션에는 데이터 변환이 포함**되기 때문이다. 그러나 데이터 변환은 데이터 마이그레이션의 한 측면일 뿐이므로 두 용어를 서로 동의어로 사용할 수 없다.

**데이터 마이그레이션**은 **데이터를 한 위치에서 다른 위치로 이동하는 것**을 의미하는 반면 **데이터 변환**은 **데이터를 한 형식에서 다른 형식으로 변환하는 것**을 의미한다.
|<center>데이터 마이그레이션</center>|<center>데이터 변환</center>|
|---|---|
|데이터가 새 데이터 센터, 위치, 시스템 또는 환경으로 이동됨|데이터가 새 애플리케이션으로 이동됨. 데이터 센터, 시스템 또는 환경은 그대로 유지될 수 있음|
|데이터 형식은 동일하게 유지될 수 있음|데이터 형식이 변환됨|
|프로세스는 계획, 구현 및 유효성 검사로 구성됨|프로세스는 추출, 변환 및 로드로 구성됨|
|데이터 마이그레이션에는 종종 데이터 변환이 포함되지만 데이터 변환이 항상 필요한 것은 아니다.|데이터 변환은 종종 데이터 마이그레이션의 첫 번째 단계 중 하나이지만 데이터 변환 없이 데이터 마이그레이션이 발생할 수 있다.|

데이터 마이그레이션은 기존 애플리케이션이 정보를 읽는 방식과 다른 방식으로 정보를 읽는 새로운 애플리케이션을 도입할 수 있다. 레거시 응용 프로그램과 함께 작동하는 데이터가 새 응용 프로그램과 함께 작동하려면 팀에서 데이터를 새 시스템이 이해하고 사용할 수 있는 형식으로 변환해야 한다. 그 변환 과정이 데이터 변환. 데이터 변환을 통해 팀은 레거시 애플리케이션에서 완전히 다른 애플리케이션이나 동일한 애플리케이션의 다른 버전으로 데이터를 이동할 수 있다. 데이터는 소스에서 추출되어 새 형식으로 변환되고 새 응용 프로그램에 로드된다.

마이그레이션을 성공적으로 수행한다는 것은 데이터를 새 위치로 이동하기 전에 데이터 마이그레이션 프로세스 초기에 발생하는 데이터를 팀에서 변환해야 함을 의미한다. 데이터 변환에는 프로파일링, 정리, 유효성 검사 또는 데이터 이동 후 데이터에 대한 품질 보증 테스트 수행이 포함되지 않는다. 따라서 데이터 마이그레이션 vs 데이터 변환의 문제가 아니라 프로젝트에 데이터 마이그레이션 및 데이터 변환이 포함되는 방식에 대한 질문이 됨

<br/>

## 데이터 마이그레이션 과정에서의 실수

<br/>

### 1. 시작 시점부터 비즈니스 사용자 참여 배제(주요 이해 관계자와 연락하지 않음)(회사와 커뮤니케이션하지 않음)
마이그레이션 후의 데이터 무결성에 대해 IT 팀이 책임질 수 있지만 데이터의 최종 사용자는 사업부이다. 비즈니스 사용자에게 정보를 제공하지 않고 이들이 일상적으로 작업하는 데이터의 병합, 정리 또는 재구성에 대한 피드백에 귀기울이지 않을 경우, 비즈니스 사용자는 마이그레이션 후에 데이터를 잘못 사용하거나 IT 팀에 수많은 지원을 요청하게 될 수 있다.

현재 처한 환경을 철저히 파악하면 이해 관계자를 참여시킬 시기와 단계와 같이 프로세스와 관련된 중요 결정에 대한 정보를 확인할 수 있다. 인프라, 마이그레이션이 필요한 데이터, 마이그레이션 순서 및 호환성 문제를 깊이 이해하면 프로젝트 범위를 더 잘 이해할 수 있다.

마이그레이션 규모에 상관없이 이동할 데이터에 관심을 갖고 있는 사람은 어딘가에 있다. 작업에 착수하기 전에 그들을 찾아 이 프로젝트의 필요성과 그것이 미치는 영향에 대해 설명해야한다. 그렇지 않을 경우 어떤 단계에서 분명 그들이 의견을 내게 되는데, 그러면 일정에 차질이 생길 가능성이 있다.

이해 관계자에게 프로젝트를 설명한 후에는 진행 상황을 알려 주어야 한다. 특히 일이 궤도에서 벗어날 경우 매주 같은 요일에 상태 보고서를 제공하는 것이 가장 좋다. 정기적인 커뮤니케이션은 영향을 받는 모든 사람들과 신뢰를 구축하는 데 도움이 된다.

<br/>

### 2. 소스 데이터 미비
프로세스를 시작할 때 이동할 소스 데이터를 정의한 다음 철저히 검사해야 한다. 새 매개변수에 맞게 데이터를 구성할 때 데이터의 중복, 공백, 잘못된 철자 및 오류로 인해 심각한 문제가 발생할 수 있다. 소스 데이터를 완벽하게 정리하고 이를 새로운 기준이나 범주로 전환하는 데 필요한 모든 방법을 확인해야 한다.

데이터 마이그레이션은 사용자에게 더 이상 적합하지 않은 레거시 구조를 제거하고 비효율성을 없앨 수 있는 좋은 기회다. 하지만 마이그레이션 프로세스 도중이 아니라 반드시 마이그레이션 프로세스 **이전**에 데이터를 정리해야 한다.

<br/>

### 3. 지속 가능한 거버넌스 미구축(데이터 거버넌스의 부재)
인프라 및 부하 관련 문제를 관리하는 도중에 데이터의 거버넌스 구조를 정의할 경우 마이그레이션 단계를 급히 처리하거나 잊어버릴 수 있다. 하지만 누가 어떤 데이터를 소유하고 누가 액세스, 편집 또는 제거할 수 있는지 이해하는 것은 매우 중요하다.

또한 조직에 처음부터 데이터 수명 주기를 관리하기 위한 프로세스가 있는지 확인해야 할 수도 있다. 그리고 기업의 비즈니스 및 검증 규칙이 최신이 아니거나 데이터가 이러한 규칙을 준수하지 않을 수 있다. 이러한 문제를 그대로 가져오는 대신 지금 시간을 내어 이러한 문제를 해결함으로써 데이터 마이그레이션 시 기업이 가진 문제까지 함께 마이그레이션하지 않도록 주의한다.

원본 시스템에서 데이터를 작성, 승인, 편집 또는 제거할 수 있는 권한이 있는 사용자를 확실히 파악하고, 프로젝트 계획의 일부로 데이터를 서면으로 문서화해야 한다.

<br/>

### 4. 테스트 및 검증 미수행
마이그레이션 중 문제가 발생하지 않을 것이라고 기대하는 것은 현실적이지 않다. 다른 IT 프로젝트와 마찬가지로 테스트는 종료 시점에만 수행하는 것이 아니라 프로세스 전반에 걸친 크리티컬 패스 활동이어야 한다. 누가 데이터를 테스트하고 평가할지 그리고 누가 테스트 결과를 승인할지 결정한다.

가동 중지 시간을 최소화하기 위해 개발 환경에서 테스트를 수행할 수 있다.

마이그레이션이 완료되면 테스트를 계속 수행한다. 이해 관계자와의 후속 미팅 스케줄을 설정해 문제점과 교훈 및 향후 실행 계획에 대해 논의한다.

<br/>

### 5. 전문성의 부재
간단한 작업이기는 하지만 데이터를 이동하는 데는 수많은 복잡성이 수반된다. 뛰어난 참조 자료를 갖춘 숙련된 전문가가 있다면 프로세스가 원활하게 진행될 수 있다.

<br/>

### 6. 계획의 부재
평균적으로 가족이 휴가를 계획하는 데는 10~20시간이 걸리는 반면, IT 팀은 최소한 그 절반에 해당하는 시간을 들여 소규모 데이터 마이그레이션을 계획할 수 있다. 계획에 많은 시간을 들이는 것이 항상 성공을 보장하는 것은 아니지만, 데이터 마이그레이션 계획을 탄탄하게 세우면 실제로 데이터를 이동하는 데 드는 시간이 단축된다.

<br/>

### 7. 검증되지 않은 마이그레이션 방법론
조사를 수행하여, 데이터 이동 절차가 우리 회사와 같은 다른 회사에서 효과가 있었는지 확인한다. 공급업체가 제안하는 일반적인 절차를 그대로 수락하고 싶은 유혹에 넘어가면 안됨

<br/>

### 8. 공급업체 및 프로젝트 관리
공급업체와 프로젝트를 반드시 관리해야 한다. 여전히 일상적인 업무도 수행하고 있다면 프로젝트 및 관련 공급업체를 모두 관리할 시간이 있는지 확인해야 함

<br/>

### 9. 오브젝트 간 의존성
현재 사용 가능한 데이터 관리 툴의 기술 및 기능을 통해 원래 계획에 포함되지 않은 종속 데이터 세트에 대해 알게 되는 것은 여전히 충격적이다. 대개 오브젝트 간 종속성은 마이그레이션 프로세스의 후반부에 이를 때까지는 발견되지 않기 때문에 만일의 사태에 대비해 구축해 두어, 전체 제공 날짜가 늦어지지 않도록 해야 한다.

<br/>

## 성공적인 데이터 마이그레이션을 위한 절차
1. **전략 설계(Design Strategy)** : 조직은 Big Bang 또는 Trickle 같은 마이그레이션 전략을 정의한다. 마이그레이션 솔루션의 기술적 아키텍처를 생성하고, 마이그레이션 프로세스를 상세화 한다.
2. **데이터 소스 분석** : 데이터를 마이그레이션하기 전에 우리가 무엇을 마이그레이션하는지 그리고 타겟 시스템의 어디에 들어가는지를 알아야 한다. 예를 들어, 얼마나 많은 데이터를 마이그레이션해야 하는지, 정형화된 데이터인지 비정형 데이터인지, 데이터 중복성이 이슈가 될 것인지 등과 같은 질문을 던지고 답한다.
3. **마이그레이션 솔루션 구축(Build a Migration Solution)** : 데이터 마이그레이션은 일회성의 대규모 작업이므로 이를 올바르게 수행하는 것이 아주 중요하다. 일반적인 전술은 데이터를 서브셋으로 나누고 한 번에 하나의 카테고리를 구축한 다음 테스트를 수행하는 것이다.
4. **데이터 정제(Data Cleansing)** : 데이터를 수집하고 정제한다. 필요하지 않은 데이터를 제거하고, 나머지 콘텐츠를 압축하고, 데이터를 원하는 포맷으로 변환한다.
5. **데이터 밸리데이션(Data Validation)** : 실행 프로세스를 검토하며, 데이터 규칙을 체크하여 예상대로 작동하는지 확인한다. 데이터 흐름에 어떤 예외가 발생하는지 주시한다.
6. **데이터 정렬(Sort Data)** : 데이터를 고품질의 사용 가능한 포맷으로 프로파일링했으면 다음 단계는 이를 마이그레이션 요구사항에 따라 분류하는 것이다. 이는 데이터를 올바른 버킷으로 넣는 일을 더 쉽게 만든다. 예를 들어 은행의 경우 데이터를 고객 유형, 제품 유형, 포트폴리오 유형, 계정 유형, 그리고 기타 기준에 따라 구성한다.
7. **실제 마이그레이션(Actual Migration)** : 모든 것이 제자리에 들어가는 최종 단계이다. 이제 한 시스템에서 다른 시스템으로 마이그레이션하기만 하면 된다.
8. **라이브 테스트 수행(Conduct a Live Test)** : 빌드 단계에서 코드를 테스트한 후에도 테스트 프로세스는 끝나지 않는다. 구현의 정확성과 애플리케이션의 완전성을 보장하기 위해 실제 데이터를 사용해 데이터 마이그레이션 설계를 테스트하는 것이 중요하다.

<br/>

## 데이터 마이그레이션 전략(Data Migration Strategies)
대부분의 마이그레이션 전략이 빅뱅(big bang) 또는 트리클(trickle)의 두 가지 범주 중 하나이다.
||<center>"Big Bang" 마이그레이션</center>|<center>"Trickle" 마이그레이션</center>|
|---|---|---|
||제한된 시간 윈도우 내에 전체 이전(full transfer)을 완료한다.|마이그레이션 프로세스를 단계적으로 완료한다.|
|장점|<li>비용이 적게 든다.</li><li>일반적으로 덜 복잡하다.</li>|<li>마이그레이션이 점진적이므로 요구되는 다운 시간이 0 이다.</li><li>롤백이 쉽다(어떤 단일 단계가 실패하면 이 단계만 롤백하고 반복하면 됨).</li><li>큰 비용을 동반하는 예상 못한 문제(expensive surporises)가 발생할 확률이 적다.</li>|
|단점|<li>다운 타임이 필요하다.</li><li>마이그레이션이 실패하면 완전한 롤백이 필요하다.</li><li>값비싼 실패가 발생할 리스크가 높다(완전한 마이그레이션 후에 어떤 문제가 발견될 수 있음)</li>|<li>비용이 더 높다.</li><li>트리클 접근법을 위해 다수의 라이브 환경을 유지해야 한다.</li>|

<br/>

## 데이터 마이그레이션의 리스크
데이터 마이그레이션은 리스크가 많고 어렵다는 평판이 있으며, 많은 계획 및 구현 단계로 구성된 시간이 많이 걸리는 작업이다. 
- **데이터 손실(Data Loss)** : 데이터 마이그레이션 프로세스 중에 데이터 손실이 발생할 수 있다. 이것이 소규모에서는 문제가 되지 않을 수도 있지만, 대규모 마이그레이션 프로그램에서는 큰 문제가 된다.
- **보안(Security)** : 조직은 마이그레이션 전에 모든 데이터가 안전하게 암호화되었는지 확인할 필요가 있다.
- **호환성(Compatibility)** : 데이터 이전에서 호환성 이슈가 발생할 수도 있다. 예) 운영체제의 변경, 예기치 못한 파일 포맷
- **긴 전송 시간 또는 지연(Long Transfer Times and Delays)** :  정확한 온라인 이전 시간을 예측하는 것이 어려울 수 있다. 네트워크 장애로 인해 연결 속도가 제한되거나 또는 하드웨어 제약으로 인해 데이터 양이 제한될 수 있다.
- **예상 못한 추가 비용(Unexpected Higher Costs)** : 부적절한 계획으로 인해 예상치 못한 비용이 종종 발생한다. 예를 들어, 온라인 이전에서 지연이 생기면 추가 요금이 부과된다.

<br/>

## 데이터 마이그레이션 도구(Data Migration Tools)
데이터 마이그레이션 도구를 아래의 세 가지 범주로 분류할 수 있다.
- 사내 데이터 마이그레이션 도구(On-premise data migration tools) : 데이터를 클라우드로 이동하지 않고, 대규모 또는 중형 네트워크 내에서 둘 이상의 서버 또는 데이터베이스 간에 데이터를 마이그레이션하도록 설계되었다. 이러한 솔루션은 데이터 웨어하우스 변경이나 또는 기본 데이터 저장소 위치 이동과 같은 작업을 수행하는 경우에 최적이다.
- 오픈 소스 데이터 마이그레이션 도구(Open source data migration tools) : 오픈 소스 솔루션은 무료이거나 상용 제품 보다 비용이 저렴하다. 오픈 소스 데이터 마이그레이션 도구는 프로젝트가 너무 크거나 복잡하지 않은 경우 데이터를 마이그레이션하는 실용적인 옵션이 될 수 있다.
- 클라우드 기반 데이터 마이그레이션 도구(Cloud-based data migration tools) : 데이터를 클라우드로 이동하도록 설계된 최신 세대이다. 비용 효율성을 고려하고 사내에서 클라우드로 데이터를 이동할 때 강화된 보안을 위해 많은 조직이 클라우드 기반 솔루션으로 전환하고 있다.

<br/>

## Reference
- http://www.terms.co.kr/migration.htm
- https://www.netapp.com/ko/data-management/what-is-data-migration/
- https://azure.microsoft.com/ko-kr/resources/cloud-computing-dictionary/what-is-data-migration/#types-of-data-migration
- https://kr.teradata.com/Trends/Data-Management/4-Common-Data-Migration-Mistakes-and-How-to-Avoid-Them
- https://grapevine9700.tistory.com/429